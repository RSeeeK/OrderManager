<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:a4j="http://richfaces.org/a4j"
      xml:lang="en" lang="en">
<h:head>
    <title>Order manager</title>
</h:head>
<h:body>
    <f:metadata>
        <f:event type="preRenderView" listener="#{applicationController.preRenderViewEvent()}"/>
    </f:metadata>
    <rich:panel>
        <h3>List of orders:</h3>
        <h:form>
            <h:commandButton value="Add new order" action="#{orderController.addNewOrder()}" style="margin-right : 8px" />

            <rich:extendedDataTable value="#{orderController.getOrders()}" id="table" var="item" filterVar="filterVal">

                <rich:column width="30px">
                    <f:facet name="header">Id</f:facet>
                    <h:link value="#{item.id}" outcome="#{orderController.editCurrentOrder()}">
                        <f:param name="orderId" value="#{item.id}"/>
                    </h:link>
                </rich:column>

                <rich:column><f:facet name="header">Order â„–</f:facet>#{item.number}</rich:column>

                <rich:column><f:facet name="header">Customer EMail</f:facet>#{item.customerEmail}</rich:column>

                <rich:column><f:facet name="header">Order time</f:facet>#{item.orderTime}</rich:column>

                <rich:column width="53px">
                    <f:facet name="header">Actions</f:facet>
                    <h:commandButton value="delete" action="#{orderController.removeCurrentOrder(item.id)}" />
                </rich:column>

            </rich:extendedDataTable>
        </h:form>

    </rich:panel>
</h:body>
</html>